<!DOCTYPE html>
<html>
<head>
<meta charset="utf8">
<script src="lexer.js"></script>
<script src="parser.js"></script>
</head>
<body>
<textarea id="input" rows="10" cols="80" style="display:inline-block"></textarea>
<div style="display:inline-block">
<input type="button" value="Лексер" onclick="testLexer()"><br><br>
<input type="button" value="Очередь" onclick="testQueue()"><br><br>
<input type="button" value="Транслятор" onclick="testParser()">
</div>
<div id="output" style="max-height:20em;overflow:auto"></div>

<script>
var inp = document.getElementById('input')
var out = document.getElementById('output')

function testLexer() {
	var lexer = new BackLexer(inp.value)
	out.innerHTML = ''
	var log = ''

	try {
		var token
		while (token = lexer.next()) {
			log += '[' + token.type + ' ' + token.data + ' @ ' + token.line + '] '
		}
	} catch (e) {
		if (!(e instanceof BackLexerException)) console.log(e)
		log += '{' + e.message + '}'
	}
	out.innerHTML = log
}

function testQueue() {
	var queue = new BackParserQueue(new BackLexer(inp.value))
	out.innerHTML = ''
	var log = ''
	try {
		var token
		while (token = queue.next()) {
			log += '[' + token.type + ' ' + token.data + ' @ ' + token.line + '] '
		}
	} catch (e) {
		if (!(e instanceof BackLexerException) && !(e instanceof BackParserException)) console.log(e)
		log += '{' + e.message + '}'
	}
	out.innerHTML = log
}

</script>
</body>
</html>